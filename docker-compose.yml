services: 
  frontend: 
    build: 
      context: ./frontend 
    volumes: 
      - ./frontend:/app:cached
      - frontend_node_modules:/app/node_modules 
    ports: 
      - "5173:5173" 
    command: ["npm", "run", "dev", "--", "--host", "0.0.0.0"]
    
  backend: 
    build: 
      context: ./backend 
    volumes: 
      - ./backend:/var/www/html 
    ports: 
      - "8000:8000"
    entrypoint: ["/usr/local/bin/entrypoint.sh"]

  nginx: 
    image: nginx:alpine 
    ports: 
      - "8080:80" 
    volumes: 
      - ./nginx/nginx.conf:/etc/nginx/conf.d/default.conf 
    depends_on: 
      - frontend 
      - backend 

volumes: 
  frontend_node_modules:
